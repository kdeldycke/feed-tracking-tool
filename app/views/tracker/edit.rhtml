<h2>Edition des suivis</h2><br>

<% form_for :tracker do |f| %>		<!-- Formulaire de remplissage de l'entrée créée dans la table tracker -->
<p>
  Titre du suivi:
  <%= f.text_field :title %>		<!-- Champ title -->
</p>

<p>
  Flux RSS:
  <%= collection_select(:rssfeed, :id, @feeds, :id, :title) %>	<!-- Liste déroulante contenant les flux RSS existant -->
</p>

<p>
  Filtre / Expression r&eacute;guli&egrave;re:
  <%= f.text_field :regex %>						<!-- Champ regex -->
</p>
<p>
  <%= submit_tag 'Ajouter'%>
</p>
<% end %>

<p><h4>Suivis existant dans la base de donn&eacute;es OVT</h4></p>

<table style="margin-bottom: 2em; margin-left: 2em; width: 95%" border="1">

	<tr>
	  <th>Titre</th>
	  <th>Flux RSS</th>
	  <th>XML</th>
	  <th>Filtre</th>
	  <th>Suivi</th>
	  <th>Modifier</th>
	  <th>Supprimer</th>
	</tr>
	
	<% Tracker.find(:all).each do |j| -%>		<!-- Pour chaque entrée de la table tracker -->
	    <tr>
	    	<td><%= j.title %></td>										<!-- Affiche le titre du suivi -->
			<td><%= link_to Rssfeed.find_by_id(j.rssfeed_id).title, Rssfeed.find_by_id(j.rssfeed_id).link %></td>		<!-- recherche le flux RSS associé dans la table rssfeed -->
			<td align="center"><%= link_to_image 'rss.gif', Rssfeed.find_by_id(j.rssfeed_id).url %></td>
			<td><%= j.regex %></td>										<!-- Affiche l'expression régulière -->
			<td><%=  %></td>
			<td><%=  %></td>
			<td><%= link_to 'Supprimer', url_for(:action => 'destroy', :id => j.id) %></td>	<!-- Suppression (lien sur l'action destroy) -->
	    </tr>
	<% end -%>

</table>